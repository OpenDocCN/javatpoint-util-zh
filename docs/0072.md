# 指挥下的 Linux

> 原文:[https://www.javatpoint.com/linux-at-command](https://www.javatpoint.com/linux-at-command)

Linux **at 命令**用于**调度任务**在指定时间执行一次，不需要编辑配置文件。它是 cron 作业调度程序**的替代方案。**如果我们想在一段时间后执行一个进程，比如关闭系统、进行备份、发送电子邮件作为提醒等等，这可能会很有用。

命令处的**能够在指定的时间和日期，或在给定的时间间隔执行命令或脚本。我们可以使用分钟、小时、天或周来指定时间。它还允许一些关键词，如**午夜**或**茶时间**(用于“至下午 4 点”)。**

#### 注意:它不能用于周期性任务，因为周期性任务更喜欢 Linux crontab。

**atq** 和 **atrm** 命令也是 at 命令的一部分。让我们简单地理解这两个命令。

**atq 命令:**atq 命令用于显示用户的待处理任务。如果用户是根用户，它将列出所有任务。否则，它将列出特定用户的工作。显示输出的格式是**任务 id、日期、小时、队列和用户名。**

**atrm 命令:**用于删除任务，由任务的工号标识。

### 选择

“at”命令支持各种选项，使其更加具体。at 命令提供的选项如下:

*   **-V:** 用于将数字显示为标准错误并成功退出。
*   **-q:** 用于指定队列。队列名称由一个字母组成。范围从 A 到 z 或 A 到 z。队列是默认队列，b 队列用于批处理。字母越多的队列优先级越高。*队列 **'='** 是特殊队列；*保留给当前正在运行的作业。
*   **-m:** 用于作业成功执行时向用户发送邮件。如果没有输出，它会工作。
*   **-M:** 用于从不向用户发送邮件。
*   **-f:** 用于从文件中读取作业，而不是标准输出。
*   **-t:** 用于指定运行作业的时间；它的格式将是[[抄送]YY]MMDDhhmm[。ss]。
*   **-l:**-l 选项是 atq 命令的别名。
*   **-r:**-r 选项是 atrm 命令的别名。
*   **-d:**-d 选项是 atrm 命令的别名。
*   **-b:**-b 选项是批处理命令的别名。
*   **-v:**-v 选项用于显示作业执行前的时间。

要使用 at 命令，我们必须将其安装在系统上。让我们了解如何安装它。

## 在 Linux (Ubuntu)中按命令安装

要按命令安装，请执行以下命令:

```

sudo apt-get install at

```

上述命令将询问系统密码，键入密码，然后按回车键。它将启动一个守护进程，并将 at 命令安装到您的机器上。考虑以下输出:

![Linux at command](../Images/a4602f5ffdb46e307c1003bbdbbc7353.png)

一旦安装了 at 命令，我们必须启动并启用 **atd** 服务。要在启动时启动并启用 atd 服务，请执行以下命令:

```

systemctl start atd
systemctl enable atd

```

上述命令将启动并启用 atd 服务。考虑以下输出:

![Linux at command](../Images/9abbd088673ec882db8a14d6dd040c8e.png)

一旦 atd 服务在我们的机器上启用，我们就可以安排任何任务或命令。现在，我们准备安排我们的第一个任务。让我们向前看。

## 使用调度第一个任务

要计划任务，请执行 at 命令，后跟时间或关键字。

例如，要计划在晚上 10 点 20 分备份任务 sh，请执行以下命令:

```

at 10.20 pm
warning: commands will be executed using /bin/sh
at> sh backup.sh
at> ^d

```

按下 **CTRL+D** 或 **^d** 键完成任务。上面的命令会将 backup.sh 安排在晚上 10 点 20 分。考虑以下输出:

![Linux at command](../Images/312db5ca986d8d2d07d4a3e4077966bf.png)

我们也可以对相同的过程使用下面的命令:

```

echo "sh backup.sh" | at 10.20 pm

```

上述命令将在晚上 10 点 20 分执行 backup.sh。考虑以下输出:

![Linux at command](../Images/53f675c1c8af0779ede57dc2d42ab130.png)

## 列出计划任务

我们可以使用 **atq** 命令列出所有计划的任务。如果我们从根用户执行它，它将列出所有用户的作业。但是，如果我们不是根用户，它将只列出特定用户的工作。按如下方式执行命令:

```

atq

```

考虑以下输出:

![Linux at command](../Images/15e272a169f126679dd1ab50f9d6875a.png)

从上面的输出中，我们可以看到我们只安排了一个任务。它分别显示任务 id、日期和时间以及用户名。

## 删除计划任务

我们可以使用 **atrm** 命令通过任务 id 删除计划任务。要删除计划作业，请执行 atrm 命令，后跟作业 id，如下所示:

```

atrm 2

```

上述命令将删除任务 id 为 2 的任务。考虑以下命令:

![Linux at command](../Images/3f7b341efb9e941eb88c337f6f17779e.png)

从上面的输出中，我们可以看到如果一个作业被成功删除，它将不会显示任何输出。要验证作业是否成功删除，请执行 atq 命令。

## 检查计划任务的内容

我们可以通过执行 atq 命令来列出任务。但是如果我们想知道计划了什么脚本或命令，我们需要在执行**命令，带有 **'-c'** 选项，后跟任务 id。按如下方式执行命令:**

```

at -c 2

```

上述命令将显示任务 id 为 2 的任务的内容。

### at 命令的示例

at 命令的一些有用示例如下:

**示例 1:将任务安排在上午 8:00。**

要将任务安排在上午 8:00，请执行以下命令:

```

at 8:00 AM

```

**输出:**

![Linux at command](../Images/76c0d5d4528a80e335d8eb974a5964d2.png)

**示例 2:将任务安排在下周二上午 8:00。**

要将任务安排在下周二上午 8:00，请执行以下命令:

```

at 8:00 AM tuesday

```

**输出:**

![Linux at command](../Images/73f9cda491387d0310089cfa03142039.png)

**例 3:将任务安排在 4 月 15 日上午 8:00。**

要将任务安排在 4 月 15 日上午 8:00，请执行以下命令:

```

at 8:00 AM apr 15

```

**输出:**

![Linux at command](../Images/7296fcebbd893fc6c5e2c807fa40b314.png)

**例 4:将任务安排在明天上午 8:00。**

要将任务安排在明天上午 8:00，请执行以下命令。

```

at 8:00 AM tomorrow

```

**输出:**

![Linux at command](../Images/3f8137851daadff3303b0855b725c829.png)

**示例 5:将任务安排在 2 小时后执行**

要将任务安排在 2 小时后执行，请执行以下命令:

```

at now + 2 hour

```

**输出:**

![Linux at command](../Images/c5e8d1723a965313c8a8748a14f2ff15.png)

## 获得帮助

如果您在使用“at”命令时被卡在任何地方，您可以通过阅读手册从您的终端获得帮助。要在命令中显示**的手动，请按如下方式执行 man 命令:**

```

man at

```

上述命令将显示手册，其中包含 at 命令的信息以及支持的选项。考虑以下输出:

![Linux at command](../Images/eb811a6ba215fac6af442e9f7c8b34a6.png)

要阅读更多滚动输出并退出手册，按下**‘q’**键。

* * *