# 克朗命令

> 原文:[https://www.javatpoint.com/cron-command](https://www.javatpoint.com/cron-command)

cron 可以被定义为*软件实用程序，其由类似 Linux 的操作系统提供，该操作系统在预定的时间段内运行预定的操作。这是一个 ***守护进程*** ，作为 ***后台进程执行。*** 当遇到条件或事件时，它在预定义的时间段执行所描述的任务，而无需用户干预。*

 *通常，处理任何重复的操作对系统管理员来说都是一项令人生畏的操作。因此，系统管理员可以通过在 ***cron*** 命令的帮助下列出命令列表，来安排这些类型的进程在后台定期自动运行。

它使所有用户都能够定期运行计划的操作，如每天备份一次、定期同步文件以及每周计划更新。

***Cron*** 反复检查计划任务，当计划时间字段与当前时间字段匹配时，计划命令将被执行。自动从 ***/etc/init.d*** 文件开始进入多用户运行级别。

## 先决条件

*   一个具有 Linux 操作系统的系统
*   进入终端/命令行窗口( ***Ctrl+Alt+F2 或 Ctrl+Alt+T*** )
*   具有 sudo 或 root 权限的用户帐户

## Crontab 的基本语法

Cron 读取命令列表的所有配置文件来运行。守护程序应用特定的语法来解释 ***crontab 的配置表中的行。*T3】**

***crontab(“cron 表”)*** 是用于在特定时间执行计划操作的命令列表。它允许用户添加、删除或修改计划的操作。

***crontab*** 命令的语法包含由空格分隔的六个部分，其中前五个部分说明执行操作的时间，最后一个部分说明命令。

分钟(它保存从 0 到 59 的值)。

小时(它保存从 0 到 23 的值)。

月中的某一天(它保存从 1 到 31 的值)。

一年中的月份(包含 1 月至 12 月或 1 月至 12 月的值，应使用月份名称的前三个字母)。

一周中的某一天(它包含从 Sun 到 Sat 或 0 到 6 的值，应使用一天的前三个字母)。

命令。

**语法:**

```

cron [-f] [-1] [-L loglevel]

```

## 克隆命令中的选项

**1。-f:** 该选项用于保持前台模式，不进行后台监控。

**2。-1:** 此选项将启用文件的符合 LSB 的名称，即 ***/etc/cron.d.***

**3。-n:** 该选项用于邮件传输时在主题内添加 FQDNs。

**4。-L 日志级别:**它将通知 cron 使用下面提到的一些值来记录任务的内容:

**1。**该值将记录每个 cron 任务的开始。

**2。**该值将记录每个 cron 任务的完成情况。

**4。**该值将记录每个失败的任务，退出状态不等于零。

**8。**该值将记录每个 cron 任务的进程数。

### 以下是定义日期和时间格式字段的一些规则:

*   如果五个字段中的一个固定为 ***星号(*)。*** 代表每个字段值。 ***例如，*** 我们可以把 ***星号(*)*** 用于执行命令的每日的星期字段。
*   此外，我们可以在日期和时间字段中应用由 ***连字符符号(-***分隔的数字范围，以包括多个连续值，但不包括每个字段值。 ***例如，*** 我们可以应用 7-10 从***7 月-10 月*** 运行任何命令
*   ***逗号运算符(，*** 用于包含可能连续也可能不连续的号码列表。例如，星期字段中的***“1，3，5”***表示每个星期一、星期三和 Fri 执行命令。
*   添加斜杠(/)字符是为了跳过提供的数字值。例如***“*/4”***在小时字段中定义 ***“每 4 小时”*** 并且它等于 0、4、8、12、16、20 的数字。

### 允许用户执行 cron 任务:

用户应列在该文件中，以便能够在文件可用时执行 cron 任务:

```

/etc/cron.allow

```

在文件，即/etc/cron.allow 不存在但文件，即 cron.deny 存在的情况下，用户不应该被列在该文件中以能够执行 cron 任务。

```

/etc/cron.deny

```

#### 重要提示:以防万一。上述两个文件都不可用，那么只有系统管理员(超级用户)可以使用提供的命令。

## 运行命令

它定义了要运行的命令。它说明了我们希望 cron 执行的命令或脚本的确切文件名或目录。

下面提到一个例子:

```

/root/backup.sh

```

上面的命令查看系统的根目录并执行脚本，即 ***backup.sh.*** 我们可以定义任何我们想要的命令或脚本。

## 输出(可选)

默认情况下，cron 在执行时会将电子邮件传输给 crontab 文件的所有者。这是保存操作记录的有效方法。请记住，小操作或常规操作会很快填满我们的收件箱。

我们可以通过停止输出电子邮件来防止这种情况，因为这是一个可选的方面。

为了关闭电子邮件输出，我们可以在命令和定时字段后包含字符串，即 **> /dev/null 2 > & 1** 。

## 设置克隆操作

我们需要打开 ***crontab*** 以及用于配置 ***cron*** 操作的文本编辑器，并输入我们希望执行的命令的语法。

### 编辑 crontab 文件

我们需要在终端窗口中键入一个命令，为当前用户打开 crontab 的配置文件。该命令如下所示:

```

crontab -e

```

![Cron Command](../Images/d695ee21da4e4336be3a3a4390c1a455.png)

我们可以包括任何预定的操作，每行一个。

***保存*** 即 ***文件*** 然后 ***退出*** 一旦我们完成包括操作。cron 的守护进程将读取并运行给定的指令。

#### 注意:Cron 不需要重新启动来应用修改。

### 编辑不同用户的 crontab

我们可以为不同的用户输入编辑 crontab 的命令。该命令如下所示:

```

crontab -u other_username -e

```

## 克隆操作示例

在描述操作时，我们可以使用符号来指定每个值。在任何字段中输入值只会对该值执行命令。

**例如:**

```

* 2 0 * 4 /root/backup.sh

```

即使它被设置为在凌晨 2 点执行，它也只在一个月的第一天(0)将落在星期三(4)之后时执行。如果我们修改如下:

```

* 2 0 * * /root/backup.sh

```

上述命令将在凌晨 2 点执行所有月份中的第一个。该表通过一个文件方便了一些常见的命令，即 ***/root/backup.sh*** 通过我们前面的例子。下表如下:

| 没有。 | 命令 | 克隆操作 |
| **1。** | *** * * * * */root/backup . sh** | 每分钟运行 cron 操作 |
| **2。** | **30 * * * * /root/backup.sh** | 每 30 分钟运行 cron opeartion |
| **3。** | **0 * * * /root/backup.sh** | 每小时运行 cron 操作 |
| **4。** | **0 0 * * * /root/backup.sh** | 每天午夜运行 cron 操作 |
| **5。** | **0 2 * * * /root/backup.sh** | 每天凌晨 2 点运行克隆操作 |
| **6。** | **0 0 1 * * /root/backup.sh** | 每月的第一天运行 cron 操作 |
| **7。** | **0 0 1 5 * * /root/backup.sh** | 每十五个月运行一次 cron 操作 |
| **8。** | **0 0 1 2 */root/backup . sh** | 12 月 1 日午夜运行 Cron Opeartion |
| **9。** | **0 0 * * 6 /root/backup.sh** | 周六午夜运行 cron 操作 |

**使用 cron 工作的时候一定要记住一些要点。下面提到这几点:**

*   控制源版本，以跟踪和维护对 cron 表达式的修改。
*   根据频率或重要性组织所有计划的操作，并根据时间或操作范围对其进行分组。
*   通过首先包括高频率来检查计划的操作。
*   不要在 cron 的表达式中直接写典型的代码或者各种重定向和管道。相反，编写它们是为了给 crontab 安排一个脚本和脚本。
*   如果类似的命令集经常重复，请应用别名。
*   使用 cron 作为超级用户，忽略正在运行的脚本或命令。

* * **